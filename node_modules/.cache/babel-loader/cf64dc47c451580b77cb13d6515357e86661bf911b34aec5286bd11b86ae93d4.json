{"ast":null,"code":"import { IsStandardObject, IsArray, IsTypedArray, IsValueType } from '../guard/index.mjs';\nimport { ValuePointer } from '../pointer/index.mjs';\nimport { Clone } from '../clone/index.mjs';\nimport { TypeBoxError } from '../../type/error/index.mjs';\n// ------------------------------------------------------------------\n// Errors\n// ------------------------------------------------------------------\nexport class ValueMutateError extends TypeBoxError {\n  constructor(message) {\n    super(message);\n  }\n}\nfunction ObjectType(root, path, current, next) {\n  if (!IsStandardObject(current)) {\n    ValuePointer.Set(root, path, Clone(next));\n  } else {\n    const currentKeys = Object.getOwnPropertyNames(current);\n    const nextKeys = Object.getOwnPropertyNames(next);\n    for (const currentKey of currentKeys) {\n      if (!nextKeys.includes(currentKey)) {\n        delete current[currentKey];\n      }\n    }\n    for (const nextKey of nextKeys) {\n      if (!currentKeys.includes(nextKey)) {\n        current[nextKey] = null;\n      }\n    }\n    for (const nextKey of nextKeys) {\n      Visit(root, `${path}/${nextKey}`, current[nextKey], next[nextKey]);\n    }\n  }\n}\nfunction ArrayType(root, path, current, next) {\n  if (!IsArray(current)) {\n    ValuePointer.Set(root, path, Clone(next));\n  } else {\n    for (let index = 0; index < next.length; index++) {\n      Visit(root, `${path}/${index}`, current[index], next[index]);\n    }\n    current.splice(next.length);\n  }\n}\nfunction TypedArrayType(root, path, current, next) {\n  if (IsTypedArray(current) && current.length === next.length) {\n    for (let i = 0; i < current.length; i++) {\n      current[i] = next[i];\n    }\n  } else {\n    ValuePointer.Set(root, path, Clone(next));\n  }\n}\nfunction ValueType(root, path, current, next) {\n  if (current === next) return;\n  ValuePointer.Set(root, path, next);\n}\nfunction Visit(root, path, current, next) {\n  if (IsArray(next)) return ArrayType(root, path, current, next);\n  if (IsTypedArray(next)) return TypedArrayType(root, path, current, next);\n  if (IsStandardObject(next)) return ObjectType(root, path, current, next);\n  if (IsValueType(next)) return ValueType(root, path, current, next);\n}\n// ------------------------------------------------------------------\n// IsNonMutableValue\n// ------------------------------------------------------------------\nfunction IsNonMutableValue(value) {\n  return IsTypedArray(value) || IsValueType(value);\n}\nfunction IsMismatchedValue(current, next) {\n  // prettier-ignore\n  return IsStandardObject(current) && IsArray(next) || IsArray(current) && IsStandardObject(next);\n}\n// ------------------------------------------------------------------\n// Mutate\n// ------------------------------------------------------------------\n/** `[Mutable]` Performs a deep mutable value assignment while retaining internal references */\nexport function Mutate(current, next) {\n  if (IsNonMutableValue(current) || IsNonMutableValue(next)) throw new ValueMutateError('Only object and array types can be mutated at the root level');\n  if (IsMismatchedValue(current, next)) throw new ValueMutateError('Cannot assign due type mismatch of assignable values');\n  Visit(current, '', current, next);\n}","map":{"version":3,"names":["IsStandardObject","IsArray","IsTypedArray","IsValueType","ValuePointer","Clone","TypeBoxError","ValueMutateError","constructor","message","ObjectType","root","path","current","next","Set","currentKeys","Object","getOwnPropertyNames","nextKeys","currentKey","includes","nextKey","Visit","ArrayType","index","length","splice","TypedArrayType","i","ValueType","IsNonMutableValue","value","IsMismatchedValue","Mutate"],"sources":["C:/Users/ordon/ThetaFlowz_Cursor/node_modules/yahoo-finance2/node_modules/@sinclair/typebox/build/esm/value/mutate/mutate.mjs"],"sourcesContent":["import { IsStandardObject, IsArray, IsTypedArray, IsValueType } from '../guard/index.mjs';\nimport { ValuePointer } from '../pointer/index.mjs';\nimport { Clone } from '../clone/index.mjs';\nimport { TypeBoxError } from '../../type/error/index.mjs';\n// ------------------------------------------------------------------\n// Errors\n// ------------------------------------------------------------------\nexport class ValueMutateError extends TypeBoxError {\n    constructor(message) {\n        super(message);\n    }\n}\nfunction ObjectType(root, path, current, next) {\n    if (!IsStandardObject(current)) {\n        ValuePointer.Set(root, path, Clone(next));\n    }\n    else {\n        const currentKeys = Object.getOwnPropertyNames(current);\n        const nextKeys = Object.getOwnPropertyNames(next);\n        for (const currentKey of currentKeys) {\n            if (!nextKeys.includes(currentKey)) {\n                delete current[currentKey];\n            }\n        }\n        for (const nextKey of nextKeys) {\n            if (!currentKeys.includes(nextKey)) {\n                current[nextKey] = null;\n            }\n        }\n        for (const nextKey of nextKeys) {\n            Visit(root, `${path}/${nextKey}`, current[nextKey], next[nextKey]);\n        }\n    }\n}\nfunction ArrayType(root, path, current, next) {\n    if (!IsArray(current)) {\n        ValuePointer.Set(root, path, Clone(next));\n    }\n    else {\n        for (let index = 0; index < next.length; index++) {\n            Visit(root, `${path}/${index}`, current[index], next[index]);\n        }\n        current.splice(next.length);\n    }\n}\nfunction TypedArrayType(root, path, current, next) {\n    if (IsTypedArray(current) && current.length === next.length) {\n        for (let i = 0; i < current.length; i++) {\n            current[i] = next[i];\n        }\n    }\n    else {\n        ValuePointer.Set(root, path, Clone(next));\n    }\n}\nfunction ValueType(root, path, current, next) {\n    if (current === next)\n        return;\n    ValuePointer.Set(root, path, next);\n}\nfunction Visit(root, path, current, next) {\n    if (IsArray(next))\n        return ArrayType(root, path, current, next);\n    if (IsTypedArray(next))\n        return TypedArrayType(root, path, current, next);\n    if (IsStandardObject(next))\n        return ObjectType(root, path, current, next);\n    if (IsValueType(next))\n        return ValueType(root, path, current, next);\n}\n// ------------------------------------------------------------------\n// IsNonMutableValue\n// ------------------------------------------------------------------\nfunction IsNonMutableValue(value) {\n    return IsTypedArray(value) || IsValueType(value);\n}\nfunction IsMismatchedValue(current, next) {\n    // prettier-ignore\n    return ((IsStandardObject(current) && IsArray(next)) ||\n        (IsArray(current) && IsStandardObject(next)));\n}\n// ------------------------------------------------------------------\n// Mutate\n// ------------------------------------------------------------------\n/** `[Mutable]` Performs a deep mutable value assignment while retaining internal references */\nexport function Mutate(current, next) {\n    if (IsNonMutableValue(current) || IsNonMutableValue(next))\n        throw new ValueMutateError('Only object and array types can be mutated at the root level');\n    if (IsMismatchedValue(current, next))\n        throw new ValueMutateError('Cannot assign due type mismatch of assignable values');\n    Visit(current, '', current, next);\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}